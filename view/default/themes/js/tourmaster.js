!function(a){"use strict";function c(a,b){document.cookie=a+"="+encodeURIComponent(b)+";expires=0;path=/"}function d(b){var c=a('<div class="tourmaster-lightbox-wrapper" ></div>').hide(),d=a('<div class="tourmaster-lightbox-content-cell" ></div>');c.append(d),d.wrap(a('<div class="tourmaster-lightbox-content-row" ></div>')),d.append(b),a("body").append(c),c.fadeIn(300),f(c),e(c),c.on("click",".tourmaster-lightbox-close",function(){c.fadeOut(300,function(){a(this).remove()})}),d.find("form").each(function(){a(this).submit(function(){var b=!0,c=a(this).find(".tourmasyer-lb-submit-error");return c.slideUp(200),a(this).find("input[data-required], select[data-required], textarea[data-required]").each(function(){a(this).val()||(b=!1)}),b||c.slideDown(200),b})})}function e(b){b.find(".tourmaster-review-form-rating").each(function(){a(this).children(".tourmaster-rating-select").click(function(){a(this).siblings("input").val(a(this).attr("data-rating-score")),a(this).is("i")&&a(this).removeClass().addClass("tourmaster-rating-select fa fa-star-half-empty"),a(this).prevAll("i").removeClass().addClass("tourmaster-rating-select fa fa-star"),a(this).nextAll("i").removeClass().addClass("tourmaster-rating-select fa fa-star-o")})})}function f(b){if("undefined"==typeof b)var c=a(".tourmaster-date-select"),d=a(".tourmaster-file-label");else var c=b.find(".tourmaster-date-select"),d=b.find(".tourmaster-file-label");c.on("change","select",function(){var b=a(this).closest(".tourmaster-date-select"),c=0,d=0,e=0;b.find("select[data-type]").each(function(){"date"==a(this).attr("data-type")?c=parseInt(a(this).val()):"month"==a(this).attr("data-type")?d=parseInt(a(this).val()):"year"==a(this).attr("data-type")&&(e=parseInt(a(this).val()))}),c>0&&d>0&&e>0&&b.siblings("input[name]").val(e+"-"+d+"-"+c)}),d.on("change",'input[type="file"]',function(){var b=a(this).siblings(".tourmaster-file-label-text");a(this).val()?b.html(a(this).val().split("\\").pop()):b.html(b.attr("data-default"))})}function g(b,c){c.animate({opacity:.2},200),a.ajax({type:"POST",url:c.attr("data-ajax-url"),data:b,dataType:"json",error:function(a,b,d){c.animate({opacity:1},200),console.log(a,b,d)},success:function(a){if("undefined"!=typeof a.content){var b=c.outerHeight();c.html(a.content);var d=c.outerHeight();c.css({height:b}),c.animate({height:d},200,function(){c.css({height:"auto"})})}c.animate({opacity:1},200)}})}function h(b,c,d){var c=a.extend({beforeSend:function(a,b){},error:function(a,b,c){console.log(a,b,c)},success:function(a){console.log("success",a)}},c),d=a.extend({action:"tourmaster_tour_booking"},d);a.ajax({type:"POST",url:b,data:d,dataType:"json",beforeSend:c.beforeSend,error:c.error,success:c.success})}function i(b){var c={};return b.find("input[name]").each(function(){c[a(this).attr("name")]=a(this).val()}),c}function j(b){var c={};return b.find("input[name], select[name], textarea[name]").each(function(){var b=a(this).attr("name");b.endsWith("[]")?(b=b.substr(0,b.length-2),"object"!=typeof c[b]&&(c[b]=[]),c[b].push(a(this).val())):c[a(this).attr("name")]=a(this).val()}),c}var b="desktop";"function"==typeof window.matchMedia?(a(window).on("resize tourmaster-set-display",function(){b=window.matchMedia("(max-width: 419px)").matches?"mobile-portrait":window.matchMedia("(max-width: 767px)").matches?"mobile-landscape":window.matchMedia("(max-width: 999px)").matches?"tablet":"desktop"}),a(window).trigger("tourmaster-set-display")):(a(window).on("resize tourmaster-set-display",function(){b=a(window).innerWidth()<=419?"mobile-portrait":a(window).innerWidth()<=767?"mobile-landscape":a(window).innerWidth()<=999?"tablet":"desktop"}),a(window).trigger("tourmaster-set-display")),window.tourmaster_confirm_box=function(b){var c=a.extend({head:"",text:"",sub:"",yes:"",no:"",success:function(){}},b),d=a('<div class="tourmaster-conform-box-overlay"></div>').appendTo(a("body")),e=a('<span class="tourmaster-confirm-box-button tourmaster-yes">'+c.yes+"</span>"),f=a('<span class="tourmaster-confirm-box-button tourmaster-no">'+c.no+"</span>"),g=a('<div class="tourmaster-confirm-box-wrapper">\t\t\t\t<div class="tourmaster-confirm-box-head">'+c.head+'</div>\t\t\t\t<div class="tourmaster-confirm-box-content-wrapper" >\t\t\t\t\t<div class="tourmaster-confirm-box-text">'+c.text+'</div>\t\t\t\t\t<div class="tourmaster-confirm-box-sub">'+c.sub+"</div>\t\t\t\t</div>\t\t\t</div>").insertAfter(d);a('<div class="tourmaster-confirm-box-button-wrapper"></div>').append(f).append(e).appendTo(g),g.css({"margin-left":-(g.outerWidth()/2),"margin-top":-(g.outerHeight()/2)}),d.css({opacity:0}).animate({opacity:.6},200),g.css({opacity:0}).animate({opacity:1},200),e.click(function(){"function"==typeof c.success&&c.success(),d.fadeOut(200,function(){a(this).remove()}),g.fadeOut(200,function(){a(this).remove()})}),f.click(function(){d.fadeOut(200,function(){a(this).remove()}),g.fadeOut(200,function(){a(this).remove()})})},a.fn.tourmaster_single_review=function(){var b=a(this).find("#tourmaster-single-review-filter"),c=a(this).find("#tourmaster-single-review-content"),d=b.find("[data-sort-by]"),e=b.find("#tourmaster-filter-by");d.click(function(){return!a(this).hasClass("tourmaster-active")&&(a(this).addClass("tourmaster-active").siblings("[data-sort-by]").removeClass("tourmaster-active"),void g({action:"get_single_tour_review",tour_id:c.attr("data-tour-id"),sort_by:a(this).attr("data-sort-by"),filter_by:e.val()},c))}),e.change(function(){g({action:"get_single_tour_review",tour_id:c.attr("data-tour-id"),sort_by:d.filter(".tourmaster-active").attr("data-sort-by"),filter_by:a(this).val()},c)}),c.on("click","[data-paged]",function(){g({action:"get_single_tour_review",tour_id:c.attr("data-tour-id"),paged:a(this).attr("data-paged"),sort_by:d.filter(".tourmaster-active").attr("data-sort-by"),filter_by:e.val()},c)})},a.fn.tourmaster_datepicker=function(){a(this).each(function(){var b=a(this).siblings(".tourmaster-datepicker-alt"),c=a(this).attr("data-date-format");if(a(this).attr("data-tour-date")){var d=a(this).attr("data-tour-range"),e=0,f=JSON.parse(a(this).attr("data-tour-date")),g=a(this).val(),h=g;a(this).datepicker({dateFormat:c,altFormat:"yy-mm-dd",altField:b,changeMonth:!0,changeYear:!0,minDate:new Date(f[0]),maxDate:new Date(f[f.length-1]),beforeShowDay:function(a){g=a.getFullYear()+"-",g+=("0"+(a.getMonth()+1)).slice(-2)+"-",g+=("0"+a.getDate()).slice(-2);var b="";return h==g&&(e=d),e>0&&(e--,b="tourmaster-highlight"),f.indexOf(g)>=0?[!0,b,""]:[!1,b,""]},onSelect:function(a,c){h=c.selectedYear+"-",h+=("0"+(c.selectedMonth+1)).slice(-2)+"-",h+=("0"+c.selectedDay).slice(-2),b.trigger("change")},beforeShow:function(b,c){var d=a(c).datepicker("widget");d.css("margin-left",a(b).outerWidth()-d.outerWidth()),d.css("margin-top",-2)},closeText:TMi18n.closeText,currentText:TMi18n.currentText,monthNames:TMi18n.monthNames,monthNamesShort:TMi18n.monthNamesShort,dayNames:TMi18n.dayNames,dayNamesShort:TMi18n.dayNamesShort,dayNamesMin:TMi18n.dayNamesMin,firstDay:TMi18n.firstDay});var i=new Date(g+"T00:00:00+00:00");i=new Date(i.getTime()+6e4*i.getTimezoneOffset()),a(this).datepicker("setDate",i)}else a(this).datepicker({dateFormat:c,altFormat:"yy-mm-dd",altField:b,changeMonth:!0,changeYear:!0})})},a.fn.tourmaster_tour_booking=function(){var e=a(this),f=a(this).attr("data-ajax-url");a(this).on("change",'input[name="tour-date"]',function(){e.find("[data-step]").each(function(){a(this).attr("data-step")>1&&a(this).slideUp(200,function(){a(this).remove()})}),h(f,{success:function(b){if("undefined"!=typeof b.content){var c=a(b.content).hide();e.append(c),c.slideDown(200)}}},{data:i(e)})}),a(this).on("change",'select[name="tour-room"]',function(){var b=a(this).closest(".tourmaster-tour-booking-room"),c=b.siblings(".tourmaster-tour-booking-room-template").children(),d=b.siblings(".tourmaster-tour-booking-people-container"),e=!1;if(a(this).val()&&0==d.length){var d=a('<div class="tourmaster-tour-booking-people-container" data-step="999" ></div>').hide();d.insertAfter(b),e=!0}if(a(this).val()){var f=parseInt(a(this).val())-d.children().length;if(f>0)for(var g=0;g<f;g++){var h=c.clone();h.attr("data-step",3),h.find(".tourmaster-tour-booking-room-text > span").html(d.children().length+1),d.append(h),e||(h.hide(),h.slideDown(200))}else f<0&&d.children("div").slice(f).slideUp(200,function(){a(this).remove()});e&&d.slideDown(200)}else d.length>0&&d.slideUp(200,function(){a(this).remove()})}),a(this).on("click",'input[type="submit"]',function(){var b=!0,g=a(this),i=a(this).siblings(".tourmaster-tour-booking-submit-error"),k=a(this).siblings(".tourmaster-tour-booking-error-max-people"),l=0;return i.filter(".tourmaster-temp").slideUp(200,function(){a(this).remove()}),e.find("[data-step]").each(function(){var c=a(this).attr("data-step");if(1==c||2==c)a(this).find("input[name], select[name]").each(function(){""==a(this).val()&&(b=!1)});else if(3==c){var d=0;a(this).find("select[name]").each(function(){""!=a(this).val()&&(d+=parseInt(a(this).val()))}),d<=0?b=!1:a(this).attr("data-max-ppl")&&d>a(this).attr("data-max-ppl")?b="error2":l+=d}}),b?"error2"==b?(i.slideUp(200),k.slideDown(200)):(i.slideUp(200),k.slideUp(200),g.animate({opacity:.5}),h(f,{success:function(f){if("success"==f.status)if(b&&g.attr("data-ask-login")){var h=g.siblings('[data-tmlb-id="'+g.attr("data-ask-login")+'"]').clone();0==h.length&&(h=e.closest("form").siblings('[data-tmlb-id="'+g.attr("data-ask-login")+'"]').clone()),d(h);var i=j(e);c("tourmaster-booking-detail",JSON.stringify(i))}else e.submit();else if("undefined"!=typeof f.message){var k=a('<div class="tourmaster-tour-booking-submit-error tourmaster-temp" ></div>').html(f.message);k.insertAfter(g),k.slideDown(200)}g.animate({opacity:1})}},{action:"tourmaster_tour_booking_amount_check",tour_id:e.find('[name="tour-id"]').val(),tour_date:e.find('[name="tour-date"]').val(),traveller:l})):(i.slideDown(200),k.slideUp(200)),!1}),a(this).closest(".tourmaster-tour-booking-bar-wrap").each(function(){var c=a(this).closest(".tourmaster-template-wrapper"),d=a(this),e=a(this).siblings(".tourmaster-tour-booking-bar-anchor"),f=parseInt(a("html").css("margin-top")),g=parseInt(e.css("margin-left"));a(this).addClass("tourmaster-start-script"),c.siblings(".tourmaster-single-header").addClass("tourmaster-start-script");var h=a(this).children(".tourmaster-tour-booking-bar-outer").children(".tourmaster-header-price");d.css("margin-top",-h.outerHeight()),e.css("margin-top",-h.outerHeight()),c.css("min-height",d.height()-h.outerHeight()),a(window).resize(function(){d.css("margin-top",-h.outerHeight()),e.css("margin-top",-h.outerHeight()),c.css("min-height",d.height()-h.outerHeight()),d.css({position:"",top:"",left:"","margin-top":e.css("margin-top")}),d.removeClass("tourmaster-fixed tourmaster-top tourmaster-bottom tourmaster-lock")});var i=0,j=0;a(window).on("scroll resize",function(){var h=!0;"mobile-landscape"!=b&&"mobile-portrait"!=b&&"tablet"!=b||(h=!1);var k=j>a(window).scrollTop()?"up":"down";j=a(window).scrollTop(),h&&a(window).scrollTop()+f+i>e.offset().top?a(window).height()>d.outerHeight()+i?a(window).scrollTop()+d.outerHeight()+f+2*i>c.offset().top+c.outerHeight()?d.hasClass("tourmaster-fixed-lock")||(d.css({position:"absolute",top:c.outerHeight()-d.outerHeight()-i,left:"auto","margin-top":0}),d.removeClass("tourmaster-fixed"),d.addClass("tourmaster-fixed-lock")):d.hasClass("tourmaster-fixed")||(d.css({position:"fixed",top:i+f,left:e.offset().left-g,"margin-top":0}),d.removeClass("tourmaster-fixed-lock"),d.addClass("tourmaster-fixed")):"down"==k?d.hasClass("tourmaster-top")?(d.css({position:"absolute",top:a(window).scrollTop()+i+f-d.parent().offset().top,left:"auto","margin-top":0}),d.removeClass("tourmaster-top"),d.addClass("tourmaster-lock")):a(window).scrollTop()+a(window).height()>c.offset().top+c.outerHeight()?d.hasClass("tourmaster-lock")||(d.css({position:"absolute",top:c.outerHeight()-d.outerHeight(),left:"auto","margin-top":0}),d.removeClass("tourmaster-bottom"),d.addClass("tourmaster-lock")):a(window).scrollTop()+a(window).height()>d.offset().top+d.outerHeight()&&(d.hasClass("tourmaster-bottom")||(d.css({position:"fixed",top:a(window).height()-d.outerHeight(),left:e.offset().left-g,"margin-top":0}),d.removeClass("tourmaster-top tourmaster-lock"),d.addClass("tourmaster-bottom"))):d.hasClass("tourmaster-bottom")?(d.css({position:"absolute",top:a(window).scrollTop()+a(window).height()-d.outerHeight()-d.parent().offset().top,left:"auto","margin-top":0}),d.removeClass("tourmaster-bottom"),d.addClass("tourmaster-lock")):d.hasClass("tourmaster-lock")&&a(window).scrollTop()+f+i<d.offset().top&&(d.css({position:"fixed",top:i+f,left:e.offset().left-g,"margin-top":0}),d.removeClass("tourmaster-bottom tourmaster-lock"),d.addClass("tourmaster-top")):(d.hasClass("tourmaster-fixed")||d.hasClass("tourmaster-top")||d.hasClass("tourmaster-bottom")||d.hasClass("tourmaster-lock"))&&(d.css({position:"",top:"",left:"","margin-top":e.css("margin-top")}),d.removeClass("tourmaster-fixed tourmaster-top tourmaster-bottom tourmaster-lock"))})})};var k=function(){var b=this;b.form=a("#tourmaster-payment-template-wrapper"),b.sidebar=b.form.find("#tourmaster-tour-booking-bar-wrap"),b.sidebar_wrap=b.sidebar.closest(".tourmaster-tour-booking-bar-wrap"),b.content=b.form.find("#tourmaster-tour-payment-content"),b.payment_step=a("#tourmaster-payment-step-wrap"),b.payment_template=a("#tourmaster-page-wrapper"),b.init()};k.prototype={init:function(){var b=this;b.bind_script(),b.bind_script_recurring(),b.form.on("click",".tourmaster-payment-step",function(){var c=b.get_booking_detail();a(this).attr("data-name")&&(c[a(this).attr("data-name")]=a(this).attr("data-value")),a(this).attr("data-step")&&(c.step=a(this).attr("data-step")),b.check_required_field()&&b.change_step({booking_detail:c})}),b.payment_step.on("click",".tourmaster-payment-step-item",function(){if(a(this).hasClass("tourmaster-enable")){var c=b.get_booking_detail();a(this).attr("data-step")&&(c.step=a(this).attr("data-step")),b.check_required_field()&&b.change_step({booking_detail:c})}})},animate_content:function(a,b){var c=a.outerHeight();a.html(b);var d=a.outerHeight();a.css({height:c}),a.animate({height:d},function(){a.css({height:"auto"},1e3)})},bind_script_recurring:function(){var b=this;b.content.find("#tourmaster-payment-method-or").each(function(){var b=(a(this).width()-a(this).children(".tourmaster-middle").width()-40)/2;a(this).children(".tourmaster-left, .tourmaster-right").css("width",b)}),a(window).resize(function(){b.content.find("#tourmaster-payment-method-or").each(function(){var b=(a(this).width()-a(this).children(".tourmaster-middle").width()-40)/2;a(this).children(".tourmaster-left, .tourmaster-right").css("width",b)})})},bind_script:function(){var b=this;b.sidebar.on("click","#tourmaster-tour-booking-bar-price-breakdown-link",function(){a(this).siblings(".tourmaster-price-breakdown").slideToggle(200)}),b.sidebar.on("click",".tourmaster-tour-booking-bar-date-edit",function(){var c=a(this).siblings("form"),d=b.get_booking_detail();c.append(a('<input name="tour_temp" />').val(JSON.stringify(d))),c.submit()}),b.sidebar.on("click",".tourmaster-tour-booking-bar-coupon-validate",function(){var c=a(this).siblings('[name="coupon-code"]'),d=a(this).siblings(".tourmaster-tour-booking-coupon-message");a.ajax({type:"POST",url:a(this).attr("data-ajax-url"),data:{coupon_code:c.val(),tour_id:a(this).attr("data-tour-id"),action:"tourmaster_validate_coupon_code"},dataType:"json",beforeSend:function(){c.animate({opacity:.3}),d.slideUp(150),d.removeClass("tourmaster-success tourmaster-failed")},error:function(a,b,c){console.log(a,b,c)},success:function(a){if(c.animate({opacity:1}),"success"==a.status){var e=b.get_booking_detail();b.change_step({booking_detail:e,sub_action:"update_sidebar"})}else d.addClass("tourmaster-"+a.status),d.html(a.message),d.slideDown(150)}})}),b.content.on("click","#tourmaster-payment-billing-copy",function(){if(a(this).is(":checked")){var b=a(this).closest(".tourmaster-payment-billing-wrap"),c=b.siblings(".tourmaster-payment-contact-wrap");b.find("[data-contact-detail]").each(function(){var b=c.find('[name="'+a(this).attr("data-contact-detail")+'"]');a(this).val(b.val())})}}),b.content.on("click","[data-tmlb]",function(){var b=a(this).siblings('[data-tmlb-id="'+a(this).attr("data-tmlb")+'"]');d(b.clone())}),b.content.on("click","[data-method]",function(){var c=a(this).attr("data-action"),d=a(this).attr("data-action-type");if("ajax"==a(this).attr("data-method")){var e=b.get_booking_detail();b.change_step({action:c,type:d,booking_detail:e})}}),b.content.on("click",".goodlayers-payment-plugin-complete",function(){b.change_step({action:"tourmaster_payment_plugin_complete",step:4})})},check_required_field:function(){var b=this,c=!0,d=b.form.find(".tourmaster-tour-booking-required-error");if(d.length&&(d.slideUp(200),b.form.find("input[data-required], select[data-required], textarea[data-required]").each(function(){a(this).val()||(a(this).addClass("tourmaster-validate-error"),c=!1)}),!c)){d.slideDown(200);var e=d.offset().top-a(window).height()+200;e>0&&a("body").animate({scrollTop:e},600,"easeOutQuad")}return c},get_booking_detail:function(){var a=this,b={};a.form.attr("data-booking-detail")&&(b=JSON.parse(a.form.attr("data-booking-detail")));var c=j(a.form);for(var d in c)b[d]=c[d];return a.form.attr("data-booking-detail",JSON.stringify(b)),b},change_step:function(b,d){var e=this,b=a.extend({action:"tourmaster_payment_template"},b),d=a.extend({beforeSend:function(){"undefined"!=typeof b.sub_action&&"update_sidebar"==b.sub_action||(e.content.animate({opacity:.1}),a("body").animate({scrollTop:e.payment_template.offset().top},600,"easeOutQuad")),e.sidebar.animate({opacity:.1})},error:function(a,b,c){console.log(a,b,c)},success:function(d){if("undefined"!=typeof d.content&&e.animate_content(e.content,d.content),"undefined"!=typeof d.sidebar&&e.animate_content(e.sidebar,d.sidebar),"undefined"!=typeof d.cookie){var f=JSON.stringify(d.cookie);c("tourmaster-booking-detail",f),e.form.attr("data-booking-detail",f)}if("undefined"!=typeof b.booking_detail||"undefined"!=typeof b.step){if("undefined"!=typeof b.step)var g=b.step;else var g=b.booking_detail.step;e.payment_step.find(".tourmaster-payment-step-item").each(function(){4==g?a(this).addClass("tourmaster-checked").removeClass("tourmaster-current tourmaster-enable"):1==a(this).attr("data-step")?a(this).addClass("tourmaster-checked").removeClass("tourmaster-current tourmaster-enable"):a(this).attr("data-step")==g?a(this).addClass("tourmaster-current").removeClass("tourmaster-checked tourmaster-enable"):a(this).attr("data-step")<g?a(this).addClass("tourmaster-enable").removeClass("tourmaster-checked tourmaster-current"):a(this).removeClass("tourmaster-checked tourmaster-current tourmaster-enable")})}e.content.animate({opacity:1}),e.sidebar.animate({opacity:1}),e.bind_script_recurring()}},d);a.ajax({type:"POST",url:e.form.attr("data-ajax-url"),data:b,dataType:"json",beforeSend:d.beforeSend,error:d.error,success:d.success})}},a(document).ready(function(){var b=a("body");a("[data-confirm]").click(function(){var b=a(this);return tourmaster_confirm_box({head:b.attr("data-confirm"),text:b.attr("data-confirm-text"),sub:b.attr("data-confirm-sub"),yes:b.attr("data-confirm-yes"),no:b.attr("data-confirm-no"),success:function(){window.location.href=b.attr("href")}}),!1}),a(".tourmaster-tour-item-style-grid").each(function(){var b=0,c=8,d=a(".tourmaster-tour-grid.tourmaster-tour-frame .tourmaster-tour-content-wrap");d.each(function(){a(this).outerHeight()>b&&(b=a(this).outerHeight())}),d.each(function(){var c=b-a(this).outerHeight()+parseInt(a(this).css("padding-bottom"));a(this).css("padding-bottom",c)}),a(window).resize(function(){b=0,d.css("padding-bottom",c),d.each(function(){a(this).outerHeight()>b&&(b=a(this).outerHeight())}),d.each(function(){var c=b-a(this).outerHeight()+parseInt(a(this).css("padding-bottom"));a(this).css("padding-bottom",c)})})}),a(".tourmaster-center-tour-content").each(function(){var b=a(this).siblings(".tourmaster-content-left").outerHeight();a(this).css({"padding-top":0,"padding-bottom":0});var c=(b-a(this).outerHeight())/2;c=c>0?c:0,a(this).css({"padding-top":c,"padding-bottom":c}),a(window).resize(function(){var b=a(this).siblings(".tourmaster-content-left").outerHeight();a(this).css({"padding-top":0,"padding-bottom":0});var c=(b-a(this).outerHeight())/2;c=c>0?c:0,a(this).css({"padding-top":c,"padding-bottom":c})})}),a("[data-rel=tipsy]").tipsy({fade:!0,gravity:"se"}),a("[data-tmlb]").on("click",function(){var b=a(this).siblings('[data-tmlb-id="'+a(this).attr("data-tmlb")+'"]').clone();d(b)}),a(".tourmaster-user-top-bar").each(function(){if(a(this).hasClass("tourmaster-user")){var b=a(this).children(".tourmaster-user-top-bar-nav").children(".tourmaster-user-top-bar-nav-inner");a(this).hover(function(){b.fadeIn(200)},function(){b.fadeOut(200)})}}),a(".tourmaster-datepicker").tourmaster_datepicker(),b.hasClass("single-tour")?(a("#tourmaster-single-tour-booking-fields").tourmaster_tour_booking(),a("#tourmaster-save-wish-list").click(function(){a(this).hasClass("tourmaster-active")||(a(this).addClass("tourmaster-active"),a.ajax({type:"POST",url:a(this).attr("data-ajax-url"),data:{action:"tourmaster_add_wish_list","tour-id":a(this).attr("data-tour-id")},dataType:"json"}))}),a("#tourmaster-single-review").tourmaster_single_review()):b.hasClass("tourmaster-template-user")?(f(),a(".tourmaster-print").click(function(){var b=a(this).attr("data-id");if(b){var c=a(a("#"+b).html());a("body").children().css("display","none"),a("body").append(c),window.print(),c.remove(),a("body").children().css("display","")}})):b.hasClass("tourmaster-template-payment")&&new k}),a(window).load(function(){var d=(a("body"),a("#tourmaster-content-navigation-item-outer"));if(!a("body").is(".wp-admin")&&d.length){window.traveltour_anchor_offset=d.height();var e=d.parent(),f=parseInt(a("html").css("margin-top")),g=d.find(".tourmaster-content-navigation-slider");d.find(".tourmaster-active").each(function(){g.css({width:a(this).outerWidth(),left:a(this).offset().left})}),d.on("tourmaster-change",function(){var b=a(this).find(".tourmaster-active");b.hasClass("tourmaster-slidebar-active")||(b.addClass("tourmaster-slidebar-active"),g.animate({width:b.outerWidth(),left:b.offset().left},{queue:!1,duration:200}))}),a(window).resize(function(){d.trigger("tourmaster-change")}),d.each(function(){a(this).find(".tourmaster-content-navigation-tab").hover(function(){g.animate({width:a(this).outerWidth(),left:a(this).offset().left},{queue:!1,duration:150})},function(){var b=a(this).parent().children(".tourmaster-slidebar-active");b.length&&g.animate({width:b.outerWidth(),left:b.offset().left},{queue:!1,duration:150})})}),a(window).scroll(function(){"mobile-landscape"!=b&&"mobile-portrait"!=b&&"tablet"!=b&&(a(this).scrollTop()+f>e.offset().top?d.hasClass("tourmaster-fixed")||(d.parent().css("height",d.parent().height()),d.addClass("tourmaster-fixed"),window.traveltour_anchor_offset=d.height()):d.hasClass("tourmaster-fixed")&&(d.parent().css("height","auto"),d.removeClass("tourmaster-fixed")))})}})}(jQuery),!function(a){function b(a,b){return"function"==typeof a?a.call(b):a}function c(a){for(;a=a.parentNode;)if(a==document)return!0;return!1}function d(b,c){this.$element=a(b),this.options=c,this.enabled=!0,this.fixTitle()}d.prototype={show:function(){var c=this.getTitle();if(c&&this.enabled){var d=this.tip();d.find(".tipsy-inner")[this.options.html?"html":"text"](c),d[0].className="tipsy",d.remove().css({top:0,left:0,visibility:"hidden",display:"block"}).prependTo(document.body);var e,f=a.extend({},this.$element.offset(),{width:this.$element[0].offsetWidth,height:this.$element[0].offsetHeight}),g=d[0].offsetWidth,h=d[0].offsetHeight,i=b(this.options.gravity,this.$element[0]);switch(i.charAt(0)){case"n":e={top:f.top+f.height+this.options.offset,left:f.left+f.width/2-g/2};break;case"s":e={top:f.top-h-this.options.offset,left:f.left+f.width/2-g/2};break;case"e":e={top:f.top+f.height/2-h/2,left:f.left-g-this.options.offset};break;case"w":e={top:f.top+f.height/2-h/2,left:f.left+f.width+this.options.offset}}2==i.length&&("w"==i.charAt(1)?e.left=f.left+f.width/2-15:e.left=f.left+f.width/2-g+15),d.css(e).addClass("tipsy-"+i),d.find(".tipsy-arrow")[0].className="tipsy-arrow tipsy-arrow-"+i.charAt(0),this.options.className&&d.addClass(b(this.options.className,this.$element[0])),this.options.fade?d.stop().css({opacity:0,display:"block",visibility:"visible"}).animate({opacity:this.options.opacity}):d.css({visibility:"visible",opacity:this.options.opacity})}},hide:function(){this.options.fade?this.tip().stop().fadeOut(function(){a(this).remove()}):this.tip().remove()},fixTitle:function(){var a=this.$element;(a.attr("title")||"string"!=typeof a.attr("original-title"))&&a.attr("original-title",a.attr("title")||"").removeAttr("title")},getTitle:function(){var a,b=this.$element,c=this.options;this.fixTitle();var a,c=this.options;return"string"==typeof c.title?a=b.attr("title"==c.title?"original-title":c.title):"function"==typeof c.title&&(a=c.title.call(b[0])),a=(""+a).replace(/(^\s*|\s*$)/,""),a||c.fallback},tip:function(){return this.$tip||(this.$tip=a('<div class="tipsy"></div>').html('<div class="tipsy-arrow"></div><div class="tipsy-inner"></div>'),this.$tip.data("tipsy-pointee",this.$element[0])),this.$tip},validate:function(){this.$element[0].parentNode||(this.hide(),this.$element=null,this.options=null)},enable:function(){this.enabled=!0},disable:function(){this.enabled=!1},toggleEnabled:function(){this.enabled=!this.enabled}},a.fn.tipsy=function(b){function c(c){var e=a.data(c,"tipsy");return e||(e=new d(c,a.fn.tipsy.elementOptions(c,b)),a.data(c,"tipsy",e)),e}function e(){var a=c(this);a.hoverState="in",0==b.delayIn?a.show():(a.fixTitle(),setTimeout(function(){"in"==a.hoverState&&a.show()},b.delayIn))}function f(){var a=c(this);a.hoverState="out",0==b.delayOut?a.hide():setTimeout(function(){"out"==a.hoverState&&a.hide()},b.delayOut)}if(b===!0)return this.data("tipsy");if("string"==typeof b){var g=this.data("tipsy");return g&&g[b](),this}if(b=a.extend({},a.fn.tipsy.defaults,b),b.live||this.each(function(){c(this)}),"manual"!=b.trigger){var h=b.live?"live":"bind",i="hover"==b.trigger?"mouseenter":"focus",j="hover"==b.trigger?"mouseleave":"blur";this[h](i,e)[h](j,f)}return this},a.fn.tipsy.defaults={className:null,delayIn:0,delayOut:0,fade:!1,fallback:"",gravity:"n",html:!1,live:!1,offset:0,opacity:.8,title:"title",trigger:"hover"},a.fn.tipsy.revalidate=function(){a(".tipsy").each(function(){var b=a.data(this,"tipsy-pointee");b&&c(b)||a(this).remove()})},a.fn.tipsy.elementOptions=function(b,c){return a.metadata?a.extend({},c,a(b).metadata()):c},a.fn.tipsy.autoNS=function(){return a(this).offset().top>a(document).scrollTop()+a(window).height()/2?"s":"n"},a.fn.tipsy.autoWE=function(){return a(this).offset().left>a(document).scrollLeft()+a(window).width()/2?"e":"w"},a.fn.tipsy.autoBounds=function(b,c){return function(){var d={ns:c[0],ew:c.length>1&&c[1]},e=a(document).scrollTop()+b,f=a(document).scrollLeft()+b,g=a(this);return g.offset().top<e&&(d.ns="n"),g.offset().left<f&&(d.ew="w"),a(window).width()+a(document).scrollLeft()-g.offset().left<b&&(d.ew="e"),a(window).height()+a(document).scrollTop()-g.offset().top<b&&(d.ns="s"),d.ns+(d.ew?d.ew:"")}}}(jQuery);